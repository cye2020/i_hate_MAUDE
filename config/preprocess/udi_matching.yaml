# ============================================
# UDI 매칭 설정
# ============================================

# 매칭 전략 (우선순위 순)
strategies:
  - name: "direct_udi_di"
    enabled: true
    confidence: "HIGH"
    join_on: ["udi_di"]
    
  - name: "secondary_udi"
    enabled: true
    confidence: "HIGH"
    join_on: ["udi_public"]
    
  - name: "manufacturer_fuzzy"
    enabled: true
    confidence: "MEDIUM"
    fuzzy_threshold: 90
    
  - name: "metadata_match"
    enabled: true
    confidence: "MEDIUM"

# 제조사명 정규화
manufacturer_normalization:
  enabled: true
  
  # 제거할 접미사
  remove_suffixes:
    - "INC"
    - "INCORPORATED"
    - "LLC"
    - "LTD"
    - "LIMITED"
    - "CORP"
    - "CORPORATION"
    - "CO"
    - "COMPANY"
    - "GMBH"
    - "AG"
  
  # 제거할 접두사
  remove_prefixes:
    - "THE"
  
  # 약어 확장
  expand_abbreviations:
    "INTL": "INTERNATIONAL"
    "MFG": "MANUFACTURING"
    "TECH": "TECHNOLOGY"
    "MED": "MEDICAL"
  
  # 특수문자 치환
  replace_chars:
    "&": "AND"
    "@": "AT"

# 퍼지 매칭
fuzzy_matching:
  enabled: true
  algorithm: "token_sort_ratio"
  threshold: 90
  top_k_matches: 3

# 신뢰도 매핑
confidence_mapping:
  HIGH:
    - "direct_udi_di"
    - "secondary_udi"
  MEDIUM:
    - "manufacturer_fuzzy"
    - "metadata_match"
  LOW:
    - "partial_match"
  VERY_LOW:
    - "no_match"

# 매칭 실패 처리
fallback:
  on_no_match: "keep_row"
  add_match_status_column: true
  add_confidence_column: true

# 제조사 준수율
compliance:
  enabled: true
  low_compliance_threshold: 0.50

# 성능 최적화
performance:
  parallel_matching: true
  max_workers: 4
  cache_udi_lookup: true